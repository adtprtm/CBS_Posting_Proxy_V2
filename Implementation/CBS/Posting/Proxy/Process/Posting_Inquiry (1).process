<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:BW="java://com.tibco.pe.core.JavaCustomXPATHFunctions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns="http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/as400/IBMiAdapter_DATA2000/ProgramCall/ProgramCall" xmlns:ns5="http://www.tibco.com/pe/WriteToLogActivitySchema" xmlns:pfx="http://xml.asyst.co.id/commons/iso8583" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns2="http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/as400/IBM_BKP_MIA_Posting/ProgramCall/ProgramCall" xmlns:ns1="http://www.tibco.com/pe/EngineTypes" xmlns:ns4="http://xml.asyst.co.id/commons/logging/transaction" xmlns:ns3="http://www.tibco.com/pe/DeployedVarsType" xmlns:pfx5="http://xml.asyst.co.id/commons/iso8583f" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:pfx4="http://xml.asyst.co.id/cbs/posting/postdata" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:pfx3="http://xml.asyst.co.id" xmlns:pfx2="http://xml.asyst.co.id/commons/logging/audit" xmlns:pfx7="http://www.tibco.com/pe/GenerateErrorActivity/InputSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pfx6="http://xml.asyst.co.id/cbs/posting/inqdata">
    <xsd:import namespace="http://xml.asyst.co.id" schemaLocation=""/>
    <xsd:import namespace="http://xml.asyst.co.id/cbs/posting/postdata" schemaLocation="/SharedResources/CBS/Posting/Proxy/Schemas/PostData.xsd"/>
    <xsd:import namespace="http://xml.asyst.co.id/commons/iso8583" schemaLocation="/SharedResources/Commons/Schemas/ISO/ISO8583.xsd"/>
    <xsd:import namespace="http://xml.asyst.co.id/cbs/posting/inqdata" schemaLocation="/SharedResources/CBS/Posting/Proxy/Schemas/InqData.xsd"/>
    <pd:name>Implementation/CBS/Posting/Proxy/Process/Posting_Inquiry (1).process</pd:name>
    <pd:startName>Start</pd:startName>
    <pd:startType>
        <xsd:element name="InquiryReq">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="BWTxnID" type="xsd:string"/>
                    <xsd:element name="ClientTxnID" type="xsd:string"/>
                    <xsd:element name="ClientID" type="xsd:string"/>
                    <xsd:element name="STAN_S" type="xsd:string"/>
                    <xsd:element ref="pfx:ISOMessages"/>
                    <xsd:element name="ActiveLib" type="xsd:string"/>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </pd:startType>
    <pd:startX>38</pd:startX>
    <pd:startY>58</pd:startY>
    <pd:returnBindings>
        <xsl:copy-of select="$GenerateDataOutput/pfx:ISOMessages"/>
    </pd:returnBindings>
    <pd:endName>End</pd:endName>
    <pd:endType ref="pfx:ISOMessages"/>
    <pd:endX>1156</pd:endX>
    <pd:endY>297</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables>
        <Output>
            <xsd:element name="root">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="Nama" type="xsd:string"/>
                        <xsd:element name="Status" type="xsd:string"/>
                        <xsd:element name="Plafon" type="xsd:string"/>
                        <xsd:element name="Blokir" type="xsd:string"/>
                        <xsd:element name="AktifBalance" type="xsd:string"/>
                        <xsd:element name="CIF" type="xsd:string"/>
                        <xsd:element name="AdditionalSign" type="xsd:string"/>
                        <xsd:element name="AdditionalAmount" type="xsd:string"/>
                        <xsd:element name="Currency" type="xsd:string"/>
                        <xsd:element name="Response" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </Output>
        <InqData ref="pfx6:InqData"/>
        <Timestamp>
            <xsd:element name="startTimestamp" type="xsd:double"/>
        </Timestamp>
    </pd:processVariables>
    <pd:targetNamespace>http://xmlns.example.com/1445239330552</pd:targetNamespace>
    <pd:activity name="AssignTimestamp">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>161</pd:x>
        <pd:y>178</pd:y>
        <config>
            <variableName>Timestamp</variableName>
        </config>
        <pd:inputBindings>
            <startTimestamp>
                <xsl:value-of select="tib:timestamp()"/>
            </startTimestamp>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Catch">
        <pd:type>com.tibco.pe.core.CatchActivity</pd:type>
        <pd:resourceType>ae.activities.catch</pd:resourceType>
        <pd:x>967</pd:x>
        <pd:y>84</pd:y>
        <pd:handler>true</pd:handler>
        <config>
            <catchAll>true</catchAll>
        </config>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="EndLog">
        <pd:type>com.tibco.pe.core.WriteToLogActivity</pd:type>
        <pd:resourceType>ae.activities.log</pd:resourceType>
        <pd:x>980</pd:x>
        <pd:y>298</pd:y>
        <config>
            <role>User</role>
            <suppressHeader>true</suppressHeader>
        </config>
        <pd:inputBindings>
            <ns5:ActivityInput>
                <message>
                    <xsl:value-of select="concat(&#xA;&#x9;&quot;Inquiry posting process triggered by &quot;, $Start/InquiryReq/ClientID,&#xA;&#x9;&quot; has finished at &quot;, current-dateTime(),&#xA;&#x9;&quot; and perfomed for &quot;, tib:timestamp() - $Timestamp/startTimestamp, &quot; ms&quot;&#xA;)"/>
                </message>
                <msgCode>
                    <xsl:value-of select="&quot;END AUDIT&quot;"/>
                </msgCode>
            </ns5:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="ErrorLog">
        <pd:type>com.tibco.pe.core.WriteToLogActivity</pd:type>
        <pd:resourceType>ae.activities.log</pd:resourceType>
        <pd:x>1124</pd:x>
        <pd:y>85</pd:y>
        <config>
            <role>User</role>
        </config>
        <pd:inputBindings>
            <ns5:ActivityInput>
                <message>
                    <xsl:value-of select="concat(&#xA;&#x9;&quot;An error occured while processing inquiry posting triggered by &quot;, $Start/InquiryReq/ClientID,&#xA;&#x9;&quot; at. &quot;, current-dateTime(),&#xA;&#x9;&quot; and performed for &quot;, tib:timestamp() - $Timestamp/startTimestamp, &quot; ms&quot;,&#xA;&#x9;&quot;Error Message &quot;,$_error/ns1:ErrorReport/StackTrace &#xA;)"/>
                </message>
                <msgCode>
                    <xsl:value-of select="&quot;ERROR AUDIT&quot;"/>
                </msgCode>
            </ns5:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="GenerateDataInput">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:x>161</pd:x>
        <pd:y>302</pd:y>
        <config>
            <element ref="pfx6:InqData"/>
        </config>
        <pd:inputBindings>
            <pfx6:InqData>
                <pfx6:iACNO>
                    <xsl:value-of select="tib:pad-front($Start/InquiryReq/pfx:ISOMessages/pfx:DataElement/pfx:Element_102, 19)"/>
                </pfx6:iACNO>
                <pfx6:iACTYPE>
                    <xsl:value-of select="substring($Start/InquiryReq/pfx:ISOMessages/pfx:DataElement/pfx:Element_03, 3, 2)"/>
                </pfx6:iACTYPE>
            </pfx6:InqData>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="GenerateDataOutput">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:x>838</pd:x>
        <pd:y>294</pd:y>
        <config>
            <element ref="pfx:ISOMessages"/>
        </config>
        <pd:inputBindings>
            <pfx:ISOMessages>
                <pfx:MTI>
                    <xsl:value-of select="$_globalVariables/ns3:GlobalVariables/CBS/Posting/Proxy/MTI_InqTrxRes"/>
                </pfx:MTI>
                <xsl:for-each select="$Start/InquiryReq/pfx:ISOMessages/pfx:DataElement">
                    <pfx:DataElement>
                        <xsl:if test="pfx:Element_01">
                            <pfx:Element_01>
                                <xsl:value-of select="pfx:Element_01"/>
                            </pfx:Element_01>
                        </xsl:if>
                        <xsl:if test="pfx:Element_02">
                            <pfx:Element_02>
                                <xsl:value-of select="pfx:Element_02"/>
                            </pfx:Element_02>
                        </xsl:if>
                        <xsl:if test="pfx:Element_03">
                            <pfx:Element_03>
                                <xsl:value-of select="pfx:Element_03"/>
                            </pfx:Element_03>
                        </xsl:if>
                        <xsl:if test="pfx:Element_04">
                            <pfx:Element_04>
                                <xsl:value-of select="pfx:Element_04"/>
                            </pfx:Element_04>
                        </xsl:if>
                        <xsl:if test="pfx:Element_05">
                            <pfx:Element_05>
                                <xsl:value-of select="pfx:Element_05"/>
                            </pfx:Element_05>
                        </xsl:if>
                        <xsl:if test="pfx:Element_06">
                            <pfx:Element_06>
                                <xsl:value-of select="pfx:Element_06"/>
                            </pfx:Element_06>
                        </xsl:if>
                        <xsl:choose>
                            <xsl:when test="pfx:Element_07">
                                <pfx:Element_07>
                                    <xsl:value-of select="pfx:Element_07"/>
                                </pfx:Element_07>
                            </xsl:when>
                            <xsl:otherwise>
                                <pfx:Element_07>
                                    <xsl:value-of select="tib:format-dateTime(&quot;MMddHHmmss&quot;, current-dateTime())"/>
                                </pfx:Element_07>
                            </xsl:otherwise>
                        </xsl:choose>
                        <xsl:if test="pfx:Element_08">
                            <pfx:Element_08>
                                <xsl:value-of select="pfx:Element_08"/>
                            </pfx:Element_08>
                        </xsl:if>
                        <xsl:if test="pfx:Element_09">
                            <pfx:Element_09>
                                <xsl:value-of select="pfx:Element_09"/>
                            </pfx:Element_09>
                        </xsl:if>
                        <xsl:if test="pfx:Element_10">
                            <pfx:Element_10>
                                <xsl:value-of select="pfx:Element_10"/>
                            </pfx:Element_10>
                        </xsl:if>
                        <pfx:Element_11>
                            <xsl:value-of select="../../STAN_S"/>
                        </pfx:Element_11>
                        <xsl:choose>
                            <xsl:when test="pfx:Element_12">
                                <pfx:Element_12>
                                    <xsl:value-of select="pfx:Element_12"/>
                                </pfx:Element_12>
                            </xsl:when>
                            <xsl:otherwise>
                                <pfx:Element_12>
                                    <xsl:value-of select="tib:format-dateTime(&quot;HHmmss&quot;, current-dateTime())"/>
                                </pfx:Element_12>
                            </xsl:otherwise>
                        </xsl:choose>
                        <xsl:choose>
                            <xsl:when test="pfx:Element_13">
                                <pfx:Element_13>
                                    <xsl:value-of select="pfx:Element_13"/>
                                </pfx:Element_13>
                            </xsl:when>
                            <xsl:otherwise>
                                <pfx:Element_13>
                                    <xsl:value-of select="tib:format-dateTime(&quot;MMdd&quot;, current-dateTime())"/>
                                </pfx:Element_13>
                            </xsl:otherwise>
                        </xsl:choose>
                        <xsl:if test="pfx:Element_14">
                            <pfx:Element_14>
                                <xsl:value-of select="pfx:Element_14"/>
                            </pfx:Element_14>
                        </xsl:if>
                        <xsl:if test="pfx:Element_15">
                            <pfx:Element_15>
                                <xsl:value-of select="pfx:Element_15"/>
                            </pfx:Element_15>
                        </xsl:if>
                        <xsl:if test="pfx:Element_16">
                            <pfx:Element_16>
                                <xsl:value-of select="pfx:Element_16"/>
                            </pfx:Element_16>
                        </xsl:if>
                        <xsl:if test="pfx:Element_17">
                            <pfx:Element_17>
                                <xsl:value-of select="pfx:Element_17"/>
                            </pfx:Element_17>
                        </xsl:if>
                        <xsl:if test="pfx:Element_18">
                            <pfx:Element_18>
                                <xsl:value-of select="pfx:Element_18"/>
                            </pfx:Element_18>
                        </xsl:if>
                        <xsl:if test="pfx:Element_19">
                            <pfx:Element_19>
                                <xsl:value-of select="pfx:Element_19"/>
                            </pfx:Element_19>
                        </xsl:if>
                        <xsl:if test="pfx:Element_20">
                            <pfx:Element_20>
                                <xsl:value-of select="pfx:Element_20"/>
                            </pfx:Element_20>
                        </xsl:if>
                        <xsl:if test="pfx:Element_21">
                            <pfx:Element_21>
                                <xsl:value-of select="pfx:Element_21"/>
                            </pfx:Element_21>
                        </xsl:if>
                        <xsl:if test="pfx:Element_22">
                            <pfx:Element_22>
                                <xsl:value-of select="pfx:Element_22"/>
                            </pfx:Element_22>
                        </xsl:if>
                        <xsl:if test="pfx:Element_23">
                            <pfx:Element_23>
                                <xsl:value-of select="pfx:Element_23"/>
                            </pfx:Element_23>
                        </xsl:if>
                        <xsl:if test="pfx:Element_24">
                            <pfx:Element_24>
                                <xsl:value-of select="pfx:Element_24"/>
                            </pfx:Element_24>
                        </xsl:if>
                        <xsl:if test="pfx:Element_25">
                            <pfx:Element_25>
                                <xsl:value-of select="pfx:Element_25"/>
                            </pfx:Element_25>
                        </xsl:if>
                        <xsl:if test="pfx:Element_26">
                            <pfx:Element_26>
                                <xsl:value-of select="pfx:Element_26"/>
                            </pfx:Element_26>
                        </xsl:if>
                        <xsl:if test="pfx:Element_27">
                            <pfx:Element_27>
                                <xsl:value-of select="pfx:Element_27"/>
                            </pfx:Element_27>
                        </xsl:if>
                        <xsl:if test="pfx:Element_28">
                            <pfx:Element_28>
                                <xsl:value-of select="pfx:Element_28"/>
                            </pfx:Element_28>
                        </xsl:if>
                        <xsl:if test="pfx:Element_29">
                            <pfx:Element_29>
                                <xsl:value-of select="pfx:Element_29"/>
                            </pfx:Element_29>
                        </xsl:if>
                        <xsl:if test="pfx:Element_30">
                            <pfx:Element_30>
                                <xsl:value-of select="pfx:Element_30"/>
                            </pfx:Element_30>
                        </xsl:if>
                        <xsl:if test="pfx:Element_31">
                            <pfx:Element_31>
                                <xsl:value-of select="pfx:Element_31"/>
                            </pfx:Element_31>
                        </xsl:if>
                        <xsl:if test="pfx:Element_32">
                            <pfx:Element_32>
                                <xsl:value-of select="pfx:Element_32"/>
                            </pfx:Element_32>
                        </xsl:if>
                        <xsl:if test="pfx:Element_33">
                            <pfx:Element_33>
                                <xsl:value-of select="pfx:Element_33"/>
                            </pfx:Element_33>
                        </xsl:if>
                        <xsl:if test="pfx:Element_34">
                            <pfx:Element_34>
                                <xsl:value-of select="pfx:Element_34"/>
                            </pfx:Element_34>
                        </xsl:if>
                        <xsl:if test="pfx:Element_35">
                            <pfx:Element_35>
                                <xsl:value-of select="pfx:Element_35"/>
                            </pfx:Element_35>
                        </xsl:if>
                        <xsl:if test="pfx:Element_36">
                            <pfx:Element_36>
                                <xsl:value-of select="pfx:Element_36"/>
                            </pfx:Element_36>
                        </xsl:if>
                        <xsl:if test="pfx:Element_37">
                            <pfx:Element_37>
                                <xsl:value-of select="pfx:Element_37"/>
                            </pfx:Element_37>
                        </xsl:if>
                        <xsl:if test="pfx:Element_38">
                            <pfx:Element_38>
                                <xsl:value-of select="pfx:Element_38"/>
                            </pfx:Element_38>
                        </xsl:if>
                        <pfx:Element_39>
                            <xsl:value-of select="$Output/root/Response"/>
                        </pfx:Element_39>
                        <xsl:if test="pfx:Element_40">
                            <pfx:Element_40>
                                <xsl:value-of select="pfx:Element_40"/>
                            </pfx:Element_40>
                        </xsl:if>
                        <xsl:if test="pfx:Element_41">
                            <pfx:Element_41>
                                <xsl:value-of select="pfx:Element_41"/>
                            </pfx:Element_41>
                        </xsl:if>
                        <xsl:if test="pfx:Element_42">
                            <pfx:Element_42>
                                <xsl:value-of select="pfx:Element_42"/>
                            </pfx:Element_42>
                        </xsl:if>
                        <xsl:if test="pfx:Element_43">
                            <pfx:Element_43>
                                <xsl:value-of select="pfx:Element_43"/>
                            </pfx:Element_43>
                        </xsl:if>
                        <xsl:if test="pfx:Element_44">
                            <pfx:Element_44>
                                <xsl:value-of select="pfx:Element_44"/>
                            </pfx:Element_44>
                        </xsl:if>
                        <xsl:if test="pfx:Element_45">
                            <pfx:Element_45>
                                <xsl:value-of select="pfx:Element_45"/>
                            </pfx:Element_45>
                        </xsl:if>
                        <xsl:if test="pfx:Element_46">
                            <pfx:Element_46>
                                <xsl:value-of select="pfx:Element_46"/>
                            </pfx:Element_46>
                        </xsl:if>
                        <xsl:if test="pfx:Element_47">
                            <pfx:Element_47>
                                <xsl:value-of select="pfx:Element_47"/>
                            </pfx:Element_47>
                        </xsl:if>
                        <pfx:Element_48>
                            <xsl:value-of select="concat(&#xA;&#x9;tib:pad($Output/root/Nama,30, ' '),&#x9;&#xA;&#x9;$Output/root/Status,&#xA;&#x9;tib:pad-front($Output/root/Plafon*100, 20,0),&#xA;&#x9;tib:pad-front($Output/root/Blokir*100, 20,0),&#xA;&#x9;tib:pad-front($Output/root/AktifBalance*100, 20,0),&#xA;&#x9;tib:pad-front($Output/root/CIF, 7,0)&#xA;)"/>
                        </pfx:Element_48>
                        <pfx:Element_49>
                            <xsl:value-of select="$Map-Currency/Currency"/>
                        </pfx:Element_49>
                        <xsl:if test="pfx:Element_50">
                            <pfx:Element_50>
                                <xsl:value-of select="pfx:Element_50"/>
                            </pfx:Element_50>
                        </xsl:if>
                        <xsl:if test="pfx:Element_51">
                            <pfx:Element_51>
                                <xsl:value-of select="pfx:Element_51"/>
                            </pfx:Element_51>
                        </xsl:if>
                        <xsl:if test="pfx:Element_52">
                            <pfx:Element_52>
                                <xsl:value-of select="pfx:Element_52"/>
                            </pfx:Element_52>
                        </xsl:if>
                        <xsl:if test="pfx:Element_53">
                            <pfx:Element_53>
                                <xsl:value-of select="pfx:Element_53"/>
                            </pfx:Element_53>
                        </xsl:if>
                        <xsl:choose>
                            <xsl:when test="$Output/root/AdditionalSign = '-'">
                                <pfx:Element_54>
                                    <xsl:value-of select="concat($Output/root/AdditionalSign, tib:pad-front(substring-after($Output/root/AdditionalAmount, '-')*100, 19, 0))"/>
                                </pfx:Element_54>
                            </xsl:when>
                            <xsl:when test="$Output/root/AdditionalAmount !=0">
                                <pfx:Element_54>
                                    <xsl:value-of select="concat($Output/root/AdditionalSign, tib:pad-front($Output/root/AdditionalAmount * 100, 19, 0))"/>
                                </pfx:Element_54>
                            </xsl:when>
                            <xsl:otherwise>
                                <pfx:Element_54>
                                    <xsl:value-of select="concat($Output/root/AdditionalSign, tib:pad-front($Output/root/AdditionalAmount, 19, 0))"/>
                                </pfx:Element_54>
                            </xsl:otherwise>
                        </xsl:choose>
                        <xsl:if test="pfx:Element_55">
                            <pfx:Element_55>
                                <xsl:value-of select="pfx:Element_55"/>
                            </pfx:Element_55>
                        </xsl:if>
                        <xsl:if test="pfx:Element_56">
                            <pfx:Element_56>
                                <xsl:value-of select="pfx:Element_56"/>
                            </pfx:Element_56>
                        </xsl:if>
                        <xsl:if test="pfx:Element_57">
                            <pfx:Element_57>
                                <xsl:value-of select="pfx:Element_57"/>
                            </pfx:Element_57>
                        </xsl:if>
                        <xsl:if test="pfx:Element_58">
                            <pfx:Element_58>
                                <xsl:value-of select="pfx:Element_58"/>
                            </pfx:Element_58>
                        </xsl:if>
                        <xsl:if test="pfx:Element_59">
                            <pfx:Element_59>
                                <xsl:value-of select="pfx:Element_59"/>
                            </pfx:Element_59>
                        </xsl:if>
                        <xsl:if test="pfx:Element_60">
                            <pfx:Element_60>
                                <xsl:value-of select="pfx:Element_60"/>
                            </pfx:Element_60>
                        </xsl:if>
                        <xsl:if test="pfx:Element_61">
                            <pfx:Element_61>
                                <xsl:value-of select="pfx:Element_61"/>
                            </pfx:Element_61>
                        </xsl:if>
                        <xsl:if test="pfx:Element_62">
                            <pfx:Element_62>
                                <xsl:value-of select="pfx:Element_62"/>
                            </pfx:Element_62>
                        </xsl:if>
                        <pfx:Element_63>
                            <xsl:value-of select="pfx:Element_63"/>
                        </pfx:Element_63>
                        <xsl:if test="pfx:Element_64">
                            <pfx:Element_64>
                                <xsl:value-of select="pfx:Element_64"/>
                            </pfx:Element_64>
                        </xsl:if>
                        <xsl:if test="pfx:Element_65">
                            <pfx:Element_65>
                                <xsl:value-of select="pfx:Element_65"/>
                            </pfx:Element_65>
                        </xsl:if>
                        <xsl:if test="pfx:Element_66">
                            <pfx:Element_66>
                                <xsl:value-of select="pfx:Element_66"/>
                            </pfx:Element_66>
                        </xsl:if>
                        <xsl:if test="pfx:Element_67">
                            <pfx:Element_67>
                                <xsl:value-of select="pfx:Element_67"/>
                            </pfx:Element_67>
                        </xsl:if>
                        <xsl:if test="pfx:Element_68">
                            <pfx:Element_68>
                                <xsl:value-of select="pfx:Element_68"/>
                            </pfx:Element_68>
                        </xsl:if>
                        <xsl:if test="pfx:Element_69">
                            <pfx:Element_69>
                                <xsl:value-of select="pfx:Element_69"/>
                            </pfx:Element_69>
                        </xsl:if>
                        <xsl:if test="pfx:Element_70">
                            <pfx:Element_70>
                                <xsl:value-of select="pfx:Element_70"/>
                            </pfx:Element_70>
                        </xsl:if>
                        <xsl:if test="pfx:Element_71">
                            <pfx:Element_71>
                                <xsl:value-of select="pfx:Element_71"/>
                            </pfx:Element_71>
                        </xsl:if>
                        <xsl:if test="pfx:Element_72">
                            <pfx:Element_72>
                                <xsl:value-of select="pfx:Element_72"/>
                            </pfx:Element_72>
                        </xsl:if>
                        <xsl:if test="pfx:Element_73">
                            <pfx:Element_73>
                                <xsl:value-of select="pfx:Element_73"/>
                            </pfx:Element_73>
                        </xsl:if>
                        <xsl:if test="pfx:Element_74">
                            <pfx:Element_74>
                                <xsl:value-of select="pfx:Element_74"/>
                            </pfx:Element_74>
                        </xsl:if>
                        <xsl:if test="pfx:Element_75">
                            <pfx:Element_75>
                                <xsl:value-of select="pfx:Element_75"/>
                            </pfx:Element_75>
                        </xsl:if>
                        <xsl:if test="pfx:Element_76">
                            <pfx:Element_76>
                                <xsl:value-of select="pfx:Element_76"/>
                            </pfx:Element_76>
                        </xsl:if>
                        <xsl:if test="pfx:Element_77">
                            <pfx:Element_77>
                                <xsl:value-of select="pfx:Element_77"/>
                            </pfx:Element_77>
                        </xsl:if>
                        <xsl:if test="pfx:Element_78">
                            <pfx:Element_78>
                                <xsl:value-of select="pfx:Element_78"/>
                            </pfx:Element_78>
                        </xsl:if>
                        <xsl:if test="pfx:Element_79">
                            <pfx:Element_79>
                                <xsl:value-of select="pfx:Element_79"/>
                            </pfx:Element_79>
                        </xsl:if>
                        <xsl:if test="pfx:Element_80">
                            <pfx:Element_80>
                                <xsl:value-of select="pfx:Element_80"/>
                            </pfx:Element_80>
                        </xsl:if>
                        <xsl:if test="pfx:Element_81">
                            <pfx:Element_81>
                                <xsl:value-of select="pfx:Element_81"/>
                            </pfx:Element_81>
                        </xsl:if>
                        <xsl:if test="pfx:Element_82">
                            <pfx:Element_82>
                                <xsl:value-of select="pfx:Element_82"/>
                            </pfx:Element_82>
                        </xsl:if>
                        <xsl:if test="pfx:Element_83">
                            <pfx:Element_83>
                                <xsl:value-of select="pfx:Element_83"/>
                            </pfx:Element_83>
                        </xsl:if>
                        <xsl:if test="pfx:Element_84">
                            <pfx:Element_84>
                                <xsl:value-of select="pfx:Element_84"/>
                            </pfx:Element_84>
                        </xsl:if>
                        <xsl:if test="pfx:Element_85">
                            <pfx:Element_85>
                                <xsl:value-of select="pfx:Element_85"/>
                            </pfx:Element_85>
                        </xsl:if>
                        <xsl:if test="pfx:Element_86">
                            <pfx:Element_86>
                                <xsl:value-of select="pfx:Element_86"/>
                            </pfx:Element_86>
                        </xsl:if>
                        <xsl:if test="pfx:Element_87">
                            <pfx:Element_87>
                                <xsl:value-of select="pfx:Element_87"/>
                            </pfx:Element_87>
                        </xsl:if>
                        <xsl:if test="pfx:Element_88">
                            <pfx:Element_88>
                                <xsl:value-of select="pfx:Element_88"/>
                            </pfx:Element_88>
                        </xsl:if>
                        <xsl:if test="pfx:Element_89">
                            <pfx:Element_89>
                                <xsl:value-of select="pfx:Element_89"/>
                            </pfx:Element_89>
                        </xsl:if>
                        <xsl:if test="pfx:Element_90">
                            <pfx:Element_90>
                                <xsl:value-of select="pfx:Element_90"/>
                            </pfx:Element_90>
                        </xsl:if>
                        <xsl:if test="pfx:Element_91">
                            <pfx:Element_91>
                                <xsl:value-of select="pfx:Element_91"/>
                            </pfx:Element_91>
                        </xsl:if>
                        <xsl:if test="pfx:Element_92">
                            <pfx:Element_92>
                                <xsl:value-of select="pfx:Element_92"/>
                            </pfx:Element_92>
                        </xsl:if>
                        <xsl:if test="pfx:Element_93">
                            <pfx:Element_93>
                                <xsl:value-of select="pfx:Element_93"/>
                            </pfx:Element_93>
                        </xsl:if>
                        <xsl:if test="pfx:Element_94">
                            <pfx:Element_94>
                                <xsl:value-of select="pfx:Element_94"/>
                            </pfx:Element_94>
                        </xsl:if>
                        <xsl:if test="pfx:Element_95">
                            <pfx:Element_95>
                                <xsl:value-of select="pfx:Element_95"/>
                            </pfx:Element_95>
                        </xsl:if>
                        <xsl:if test="pfx:Element_96">
                            <pfx:Element_96>
                                <xsl:value-of select="pfx:Element_96"/>
                            </pfx:Element_96>
                        </xsl:if>
                        <xsl:if test="pfx:Element_97">
                            <pfx:Element_97>
                                <xsl:value-of select="pfx:Element_97"/>
                            </pfx:Element_97>
                        </xsl:if>
                        <xsl:if test="pfx:Element_98">
                            <pfx:Element_98>
                                <xsl:value-of select="pfx:Element_98"/>
                            </pfx:Element_98>
                        </xsl:if>
                        <xsl:if test="pfx:Element_99">
                            <pfx:Element_99>
                                <xsl:value-of select="pfx:Element_99"/>
                            </pfx:Element_99>
                        </xsl:if>
                        <xsl:if test="pfx:Element_100">
                            <pfx:Element_100>
                                <xsl:value-of select="pfx:Element_100"/>
                            </pfx:Element_100>
                        </xsl:if>
                        <xsl:if test="pfx:Element_101">
                            <pfx:Element_101>
                                <xsl:value-of select="pfx:Element_101"/>
                            </pfx:Element_101>
                        </xsl:if>
                        <xsl:if test="pfx:Element_102">
                            <pfx:Element_102>
                                <xsl:value-of select="pfx:Element_102"/>
                            </pfx:Element_102>
                        </xsl:if>
                        <xsl:if test="pfx:Element_103">
                            <pfx:Element_103>
                                <xsl:value-of select="pfx:Element_103"/>
                            </pfx:Element_103>
                        </xsl:if>
                        <xsl:if test="pfx:Element_104">
                            <pfx:Element_104>
                                <xsl:value-of select="pfx:Element_104"/>
                            </pfx:Element_104>
                        </xsl:if>
                        <xsl:if test="pfx:Element_105">
                            <pfx:Element_105>
                                <xsl:value-of select="pfx:Element_105"/>
                            </pfx:Element_105>
                        </xsl:if>
                        <xsl:if test="pfx:Element_106">
                            <pfx:Element_106>
                                <xsl:value-of select="pfx:Element_106"/>
                            </pfx:Element_106>
                        </xsl:if>
                        <xsl:if test="pfx:Element_107">
                            <pfx:Element_107>
                                <xsl:value-of select="pfx:Element_107"/>
                            </pfx:Element_107>
                        </xsl:if>
                        <xsl:if test="pfx:Element_108">
                            <pfx:Element_108>
                                <xsl:value-of select="pfx:Element_108"/>
                            </pfx:Element_108>
                        </xsl:if>
                        <xsl:if test="pfx:Element_109">
                            <pfx:Element_109>
                                <xsl:value-of select="pfx:Element_109"/>
                            </pfx:Element_109>
                        </xsl:if>
                        <xsl:if test="pfx:Element_110">
                            <pfx:Element_110>
                                <xsl:value-of select="pfx:Element_110"/>
                            </pfx:Element_110>
                        </xsl:if>
                        <xsl:if test="pfx:Element_111">
                            <pfx:Element_111>
                                <xsl:value-of select="pfx:Element_111"/>
                            </pfx:Element_111>
                        </xsl:if>
                        <xsl:if test="pfx:Element_112">
                            <pfx:Element_112>
                                <xsl:value-of select="pfx:Element_112"/>
                            </pfx:Element_112>
                        </xsl:if>
                        <xsl:if test="pfx:Element_113">
                            <pfx:Element_113>
                                <xsl:value-of select="pfx:Element_113"/>
                            </pfx:Element_113>
                        </xsl:if>
                        <xsl:if test="pfx:Element_114">
                            <pfx:Element_114>
                                <xsl:value-of select="pfx:Element_114"/>
                            </pfx:Element_114>
                        </xsl:if>
                        <xsl:if test="pfx:Element_115">
                            <pfx:Element_115>
                                <xsl:value-of select="pfx:Element_115"/>
                            </pfx:Element_115>
                        </xsl:if>
                        <xsl:if test="pfx:Element_116">
                            <pfx:Element_116>
                                <xsl:value-of select="pfx:Element_116"/>
                            </pfx:Element_116>
                        </xsl:if>
                        <xsl:if test="pfx:Element_117">
                            <pfx:Element_117>
                                <xsl:value-of select="pfx:Element_117"/>
                            </pfx:Element_117>
                        </xsl:if>
                        <xsl:if test="pfx:Element_118">
                            <pfx:Element_118>
                                <xsl:value-of select="pfx:Element_118"/>
                            </pfx:Element_118>
                        </xsl:if>
                        <xsl:if test="pfx:Element_119">
                            <pfx:Element_119>
                                <xsl:value-of select="pfx:Element_119"/>
                            </pfx:Element_119>
                        </xsl:if>
                        <xsl:if test="pfx:Element_120">
                            <pfx:Element_120>
                                <xsl:value-of select="pfx:Element_120"/>
                            </pfx:Element_120>
                        </xsl:if>
                        <xsl:if test="pfx:Element_121">
                            <pfx:Element_121>
                                <xsl:value-of select="pfx:Element_121"/>
                            </pfx:Element_121>
                        </xsl:if>
                        <xsl:if test="pfx:Element_122">
                            <pfx:Element_122>
                                <xsl:value-of select="pfx:Element_122"/>
                            </pfx:Element_122>
                        </xsl:if>
                        <xsl:if test="pfx:Element_123">
                            <pfx:Element_123>
                                <xsl:value-of select="pfx:Element_123"/>
                            </pfx:Element_123>
                        </xsl:if>
                        <xsl:if test="pfx:Element_124">
                            <pfx:Element_124>
                                <xsl:value-of select="pfx:Element_124"/>
                            </pfx:Element_124>
                        </xsl:if>
                        <xsl:if test="pfx:Element_125">
                            <pfx:Element_125>
                                <xsl:value-of select="pfx:Element_125"/>
                            </pfx:Element_125>
                        </xsl:if>
                        <xsl:if test="pfx:Element_126">
                            <pfx:Element_126>
                                <xsl:value-of select="pfx:Element_126"/>
                            </pfx:Element_126>
                        </xsl:if>
                        <xsl:if test="pfx:Element_127">
                            <pfx:Element_127>
                                <xsl:value-of select="pfx:Element_127"/>
                            </pfx:Element_127>
                        </xsl:if>
                        <xsl:if test="pfx:Element_128">
                            <pfx:Element_128>
                                <xsl:value-of select="pfx:Element_128"/>
                            </pfx:Element_128>
                        </xsl:if>
                    </pfx:DataElement>
                </xsl:for-each>
            </pfx:ISOMessages>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="InvalidDataError">
        <pd:type>com.tibco.pe.core.GenerateErrorActivity</pd:type>
        <pd:resourceType>ae.activities.throw</pd:resourceType>
        <pd:x>51</pd:x>
        <pd:y>306</pd:y>
        <config>
            <faultName/>
        </config>
        <pd:inputBindings>
            <pfx7:ActivityInput>
                <message>
                    <xsl:value-of select="concat(&quot;Invalid data input error &quot;, tib:render-xml($GenerateDataInput/pfx6:InqData, false(), true()))"/>
                </message>
                <messageCode>
                    <xsl:value-of select="&quot;GENERATE ERROR AUDIT&quot;"/>
                </messageCode>
            </pfx7:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="InvalidInput">
        <pd:type>com.tibco.pe.core.GenerateErrorActivity</pd:type>
        <pd:resourceType>ae.activities.throw</pd:resourceType>
        <pd:x>38</pd:x>
        <pd:y>180</pd:y>
        <config>
            <faultName/>
        </config>
        <pd:inputBindings>
            <pfx7:ActivityInput>
                <message>
                    <xsl:value-of select="concat(&quot;Invalid input data error &quot;, tib:render-xml($Start/InquiryReq, false(), true()))"/>
                </message>
                <messageCode>
                    <xsl:value-of select="&quot;GENERATE ERROR AUDIT&quot;"/>
                </messageCode>
            </pfx7:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Rethrow">
        <pd:type>com.tibco.pe.core.RethrowActivity</pd:type>
        <pd:resourceType>ae.activities.rethrow</pd:resourceType>
        <pd:x>1274</pd:x>
        <pd:y>85</pd:y>
        <config/>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="StartLog">
        <pd:type>com.tibco.pe.core.WriteToLogActivity</pd:type>
        <pd:resourceType>ae.activities.log</pd:resourceType>
        <pd:x>160</pd:x>
        <pd:y>58</pd:y>
        <config>
            <role>User</role>
            <suppressHeader>true</suppressHeader>
        </config>
        <pd:inputBindings>
            <ns5:ActivityInput>
                <message>
                    <xsl:value-of select="concat(&quot;Start inquiry posting process triggered by  &quot;, $Start/InquiryReq/ClientID, &quot; at &quot;, current-dateTime())"/>
                </message>
                <msgCode>
                    <xsl:value-of select="&quot;START AUDIT&quot;"/>
                </msgCode>
            </ns5:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Query SA">
        <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
        <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
        <pd:x>345</pd:x>
        <pd:y>164</pd:y>
        <config>
            <timeout>10</timeout>
            <commit>false</commit>
            <maxRows>100</maxRows>
            <emptyStrAsNil>false</emptyStrAsNil>
            <jdbcSharedConfig>/SharedResources/Commons/Connections/JDBC/DB2-JDBC-Connection.sharedjdbc</jdbcSharedConfig>
            <statement>SELECT ACNO, NAMA, ACSTA, CSSTA,  AMBLK, BLCUR-AMBLK AS BLCUR, CSNO, CCCOD, BLCUR AS BLCUR2 FROM SAFMAS
WHERE ACNO = ?</statement>
            <Prepared_Param_DataType>
                <parameter>
                    <parameterName>ACNO</parameterName>
                    <dataType>VARCHAR</dataType>
                </parameter>
            </Prepared_Param_DataType>
            <oraObjects/>
            <oraTables/>
            <QueryOutputCachedSchemaColumns>ACNO</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>NAMA</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>1</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>CHAR</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>ACSTA</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>CSSTA</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>AMBLK</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>BLCUR</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>CSNO</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>CCCOD</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>BLCUR2</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
        </config>
        <pd:inputBindings>
            <jdbcQueryActivityInput>
                <ACNO>
                    <xsl:choose>
                        <xsl:when test="exists(tib:trim($GenerateDataInput/pfx6:InqData/pfx6:iACNO))">
                            <xsl:value-of select="tib:trim($GenerateDataInput/pfx6:InqData/pfx6:iACNO)"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:attribute name="xsi:nil">true</xsl:attribute>
                        </xsl:otherwise>
                    </xsl:choose>
                </ACNO>
            </jdbcQueryActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Query RK">
        <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
        <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
        <pd:x>344</pd:x>
        <pd:y>298</pd:y>
        <config>
            <timeout>10</timeout>
            <commit>false</commit>
            <maxRows>100</maxRows>
            <emptyStrAsNil>false</emptyStrAsNil>
            <statement>SELECT A.ACNO, BNAME, B.ACSTA, A.BLCUR + A.CRLIM - A.AMBLK AS BLCUR, A.AMBLK, A.CRLIM, B.CSNO, A.CCCOD, A.BLCUR AS BLCUR2
FROM RKFMAS A INNER JOIN RKFBATCH B ON A.ACNO = B.ACNO 
WHERE A.ACNO = ?</statement>
            <jdbcSharedConfig>/SharedResources/Commons/Connections/JDBC/DB2-JDBC-Connection.sharedjdbc</jdbcSharedConfig>
            <Prepared_Param_DataType>
                <parameter>
                    <parameterName>ACNO</parameterName>
                    <dataType>VARCHAR</dataType>
                </parameter>
            </Prepared_Param_DataType>
            <oraObjects/>
            <oraTables/>
            <QueryOutputCachedSchemaColumns>ACNO</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>BNAME</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>1</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>CHAR</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>ACSTA</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>BLCUR</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>AMBLK</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>CRLIM</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>CSNO</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>CCCOD</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>BLCUR2</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
        </config>
        <pd:inputBindings>
            <jdbcQueryActivityInput>
                <ACNO>
                    <xsl:choose>
                        <xsl:when test="exists($GenerateDataInput/pfx6:InqData/pfx6:iACNO)">
                            <xsl:value-of select="$GenerateDataInput/pfx6:InqData/pfx6:iACNO"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:attribute name="xsi:nil">true</xsl:attribute>
                        </xsl:otherwise>
                    </xsl:choose>
                </ACNO>
            </jdbcQueryActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Query VA">
        <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
        <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
        <pd:x>343</pd:x>
        <pd:y>429</pd:y>
        <config>
            <timeout>10</timeout>
            <commit>false</commit>
            <maxRows>100</maxRows>
            <emptyStrAsNil>false</emptyStrAsNil>
            <jdbcSharedConfig>/SharedResources/Commons/Connections/JDBC/DB2-JDBC-Connection.sharedjdbc</jdbcSharedConfig>
            <statement>SELECT A.VAACNO, A.VANAMA, A.VABLCUR, B.BLNOM, 
CASE 
	WHEN B.BLNOM IS NOT NULL THEN a.VABLCUR-b.BLNOM
	ELSE A.VABLCUR END AS BLCUR,
A.VASTACVA, C.VACIF
FROM VAFMAS A LEFT JOIN VAFBLOK B ON A.VAACNO = B.BLACNO  LEFT JOIN VAFCIF C ON A.VAACNO = C.VAACNO
WHERE A.VAACNO = ?</statement>
            <Prepared_Param_DataType>
                <parameter>
                    <parameterName>ACNO</parameterName>
                    <dataType>VARCHAR</dataType>
                </parameter>
            </Prepared_Param_DataType>
            <oraObjects/>
            <oraTables/>
            <QueryOutputCachedSchemaColumns>VAACNO</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>VANAMA</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>1</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>CHAR</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>VABLCUR</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>BLNOM</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>BLCUR</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>VASTACVA</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
            <QueryOutputCachedSchemaColumns>VACIF</QueryOutputCachedSchemaColumns>
            <QueryOutputCachedSchemaDataTypes>3</QueryOutputCachedSchemaDataTypes>
            <QueryOutputCachedSchemaDataTypesName>DECIMAL</QueryOutputCachedSchemaDataTypesName>
            <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
        </config>
        <pd:inputBindings>
            <jdbcQueryActivityInput>
                <ACNO>
                    <xsl:choose>
                        <xsl:when test="exists(tib:trim($GenerateDataInput/pfx6:InqData/pfx6:iACNO))">
                            <xsl:value-of select="tib:trim($GenerateDataInput/pfx6:InqData/pfx6:iACNO)"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:attribute name="xsi:nil">true</xsl:attribute>
                        </xsl:otherwise>
                    </xsl:choose>
                </ACNO>
            </jdbcQueryActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Assign SA">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>500</pd:x>
        <pd:y>165</pd:y>
        <config>
            <variableName>Output</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <Nama>
                    <xsl:value-of select="tib:trim($Query-SA/resultSet/Record[1]/NAMA)"/>
                </Nama>
                <xsl:choose>
                    <xsl:when test="$Query-SA/resultSet/Record[1]/ACSTA = 1">
                        <xsl:choose>
                            <xsl:when test="$Query-SA/resultSet/Record[1]/CSSTA = 1">
                                <Status>
                                    <xsl:value-of select="1"/>
                                </Status>
                            </xsl:when>
                            <xsl:when test="$Query-SA/resultSet/Record[1]/CSSTA = 2">
                                <Status>
                                    <xsl:value-of select="2"/>
                                </Status>
                            </xsl:when>
                            <xsl:otherwise>
                                <Status>
                                    <xsl:value-of select="9"/>
                                </Status>
                            </xsl:otherwise>
                        </xsl:choose>
                    </xsl:when>
                    <xsl:otherwise>
                        <Status>
                            <xsl:value-of select="'0'"/>
                        </Status>
                    </xsl:otherwise>
                </xsl:choose>
                <Plafon>
                    <xsl:value-of select="0"/>
                </Plafon>
                <Blokir>
                    <xsl:value-of select="$Query-SA/resultSet/Record[1]/AMBLK"/>
                </Blokir>
                <AktifBalance>
                    <xsl:value-of select="$Query-SA/resultSet/Record[1]/BLCUR"/>
                </AktifBalance>
                <CIF>
                    <xsl:value-of select="$Query-SA/resultSet/Record[1]/CSNO"/>
                </CIF>
                <xsl:choose>
                    <xsl:when test="tib:left($Query-SA/resultSet/Record[1]/BLCUR2, 1) = '-'">
                        <AdditionalSign>
                            <xsl:value-of select="'-'"/>
                        </AdditionalSign>
                    </xsl:when>
                    <xsl:otherwise>
                        <AdditionalSign>
                            <xsl:value-of select="'0'"/>
                        </AdditionalSign>
                    </xsl:otherwise>
                </xsl:choose>
                <AdditionalAmount>
                    <xsl:value-of select="$Query-SA/resultSet/Record[1]/BLCUR2"/>
                </AdditionalAmount>
                <Currency>
                    <xsl:value-of select="$Query-SA/resultSet/Record[1]/CCCOD"/>
                </Currency>
                <Response>
                    <xsl:value-of select="'000'"/>
                </Response>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Assign RK">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>495</pd:x>
        <pd:y>300</pd:y>
        <config>
            <variableName>Output</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <Nama>
                    <xsl:value-of select="tib:trim($Query-RK/resultSet/Record[1]/BNAME)"/>
                </Nama>
                <xsl:choose>
                    <xsl:when test="$Query-RK/resultSet/Record[1]/ACSTA = 0">
                        <Status>
                            <xsl:value-of select="'0'"/>
                        </Status>
                    </xsl:when>
                    <xsl:when test="$Query-RK/resultSet/Record[1]/ACSTA = 1">
                        <Status>
                            <xsl:value-of select="1"/>
                        </Status>
                    </xsl:when>
                    <xsl:otherwise>
                        <Status>
                            <xsl:value-of select="9"/>
                        </Status>
                    </xsl:otherwise>
                </xsl:choose>
                <Plafon>
                    <xsl:value-of select="$Query-RK/resultSet/Record[1]/CRLIM"/>
                </Plafon>
                <Blokir>
                    <xsl:value-of select="$Query-RK/resultSet/Record[1]/AMBLK"/>
                </Blokir>
                <AktifBalance>
                    <xsl:value-of select="$Query-RK/resultSet/Record[1]/BLCUR"/>
                </AktifBalance>
                <CIF>
                    <xsl:value-of select="$Query-RK/resultSet/Record[1]/CSNO"/>
                </CIF>
                <AdditionalSign>
                    <xsl:value-of select="''"/>
                </AdditionalSign>
                <AdditionalAmount>
                    <xsl:value-of select="''"/>
                </AdditionalAmount>
                <Currency>
                    <xsl:value-of select="$Query-RK/resultSet/Record[1]/CCCOD"/>
                </Currency>
                <Response>
                    <xsl:value-of select="'000'"/>
                </Response>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Map Currency">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:x>652</pd:x>
        <pd:y>297</pd:y>
        <config>
            <element>
                <xsd:element name="Currency" type="xsd:string"/>
            </element>
        </config>
        <pd:inputBindings>
            <xsl:choose>
                <xsl:when test="$Output/root/Currency = 51">
                    <Currency>
                        <xsl:value-of select="840"/>
                    </Currency>
                </xsl:when>
                <xsl:when test="$Output/root/Currency = 52">
                    <Currency>
                        <xsl:value-of select="702"/>
                    </Currency>
                </xsl:when>
                <xsl:when test="$Output/root/Currency = 53">
                    <Currency>
                        <xsl:value-of select="36"/>
                    </Currency>
                </xsl:when>
                <xsl:when test="$Output/root/Currency = 54">
                    <Currency>
                        <xsl:value-of select="344"/>
                    </Currency>
                </xsl:when>
                <xsl:when test="$Output/root/Currency = 55">
                    <Currency>
                        <xsl:value-of select="392"/>
                    </Currency>
                </xsl:when>
                <xsl:when test="$Output/root/Currency = 57">
                    <Currency>
                        <xsl:value-of select="458"/>
                    </Currency>
                </xsl:when>
                <xsl:when test="$Output/root/Currency = 58">
                    <Currency>
                        <xsl:value-of select="978"/>
                    </Currency>
                </xsl:when>
                <xsl:when test="$Output/root/Currency = 59">
                    <Currency>
                        <xsl:value-of select="826"/>
                    </Currency>
                </xsl:when>
                <xsl:when test="$Output/root/Currency = 60">
                    <Currency>
                        <xsl:value-of select="947"/>
                    </Currency>
                </xsl:when>
                <xsl:otherwise>
                    <Currency>
                        <xsl:value-of select="360"/>
                    </Currency>
                </xsl:otherwise>
            </xsl:choose>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Assign VA">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>495</pd:x>
        <pd:y>431</pd:y>
        <config>
            <variableName>Output</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <Nama>
                    <xsl:value-of select="$Query-VA/resultSet/Record[1]/VANAMA"/>
                </Nama>
                <Status>
                    <xsl:value-of select="$Query-VA/resultSet/Record[1]/VASTACVA"/>
                </Status>
                <Plafon>
                    <xsl:value-of select="0"/>
                </Plafon>
                <xsl:choose>
                    <xsl:when test="exists($Query-VA/resultSet/Record/BLNOM)">
                        <Blokir>
                            <xsl:value-of select="$Query-VA/resultSet/Record[1]/BLNOM"/>
                        </Blokir>
                    </xsl:when>
                    <xsl:otherwise>
                        <Blokir>
                            <xsl:value-of select="0"/>
                        </Blokir>
                    </xsl:otherwise>
                </xsl:choose>
                <AktifBalance>
                    <xsl:value-of select="$Query-VA/resultSet/Record[1]/BLCUR"/>
                </AktifBalance>
                <CIF>
                    <xsl:value-of select="$Query-VA/resultSet/Record[1]/VACIF"/>
                </CIF>
                <AdditionalSign>
                    <xsl:value-of select="0"/>
                </AdditionalSign>
                <AdditionalAmount>
                    <xsl:value-of select="$Query-VA/resultSet/Record[1]/VABLCUR"/>
                </AdditionalAmount>
                <Currency>
                    <xsl:value-of select="'360'"/>
                </Currency>
                <Response>
                    <xsl:value-of select="'000'"/>
                </Response>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>Start</pd:from>
        <pd:to>StartLog</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>GenerateDataOutput</pd:from>
        <pd:to>EndLog</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Catch</pd:from>
        <pd:to>ErrorLog</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-65536</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>StartLog</pd:from>
        <pd:to>AssignTimestamp</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>AssignTimestamp</pd:from>
        <pd:to>GenerateDataInput</pd:to>
        <pd:xpathDescription>valid</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>EndLog</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>GenerateDataInput</pd:from>
        <pd:to>InvalidDataError</pd:to>
        <pd:xpathDescription>invalid data</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-65536</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>string-length($GenerateDataInput/pfx6:InqData/pfx6:iACNO) !=19
or
string-length($GenerateDataInput/pfx6:InqData/pfx6:iACTYPE) !=2</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>ErrorLog</pd:from>
        <pd:to>Rethrow</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-65536</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>AssignTimestamp</pd:from>
        <pd:to>InvalidInput</pd:to>
        <pd:xpathDescription>invalid input</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-65536</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>string-length($Start/InquiryReq/pfx:ISOMessages/pfx:DataElement/pfx:Element_03) !=6</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>GenerateDataInput</pd:from>
        <pd:to>Query SA</pd:to>
        <pd:xpathDescription>SA</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$GenerateDataInput/pfx6:InqData/pfx6:iACTYPE = '10'</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>GenerateDataInput</pd:from>
        <pd:to>Query RK</pd:to>
        <pd:xpathDescription>RK</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$GenerateDataInput/pfx6:InqData/pfx6:iACTYPE = '20'</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Query SA</pd:from>
        <pd:to>Assign SA</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Query RK</pd:from>
        <pd:to>Assign RK</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Assign SA</pd:from>
        <pd:to>Map Currency</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Assign RK</pd:from>
        <pd:to>Map Currency</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Map Currency</pd:from>
        <pd:to>GenerateDataOutput</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>GenerateDataInput</pd:from>
        <pd:to>Query VA</pd:to>
        <pd:xpathDescription>VA</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$GenerateDataInput/pfx6:InqData/pfx6:iACTYPE = '70'</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Query VA</pd:from>
        <pd:to>Assign VA</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Assign VA</pd:from>
        <pd:to>Map Currency</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
</pd:ProcessDefinition>